# भाग 3: संसाधन प्रोफाइलिंग और अनुकूलन

<span class="ai-translation-notice">:material-information-outline:{ .ai-translation-notice-icon } AI-सहायता प्राप्त अनुवाद - [अधिक जानें और सुधार सुझाएं](https://github.com/nextflow-io/training/blob/master/TRANSLATING.md)</span>

यह एक प्लेसहोल्डर है

!!!note "नोट"

    यह प्रशिक्षण मॉड्यूल पुनर्विकास के अधीन है।

---

TODO

### 1.1. संसाधन उपयोग रिपोर्ट उत्पन्न करने के लिए workflow चलाएं

Nextflow से रिपोर्ट स्वचालित रूप से उत्पन्न करवाने के लिए, बस अपनी command line में `-with-report <filename>.html` जोड़ें।

```bash
nextflow run main.nf -profile my_laptop -with-report report-config-1.html
```

यह रिपोर्ट एक html फ़ाइल है, जिसे आप डाउनलोड करके अपने ब्राउज़र में खोल सकते हैं। आप बाईं ओर फ़ाइल explorer में इस पर right click भी कर सकते हैं और इसे VS Code में देखने के लिए `Show preview` पर क्लिक कर सकते हैं।

रिपोर्ट को देखने में कुछ मिनट लें और देखें कि क्या आप संसाधनों को समायोजित करने के कुछ अवसरों की पहचान कर सकते हैं।
उन tabs पर क्लिक करना सुनिश्चित करें जो आवंटित की गई राशि के प्रतिशत के रूप में उपयोग के परिणाम दिखाते हैं।
सभी उपलब्ध सुविधाओं का वर्णन करने वाला कुछ [documentation](https://www.nextflow.io/docs/latest/reports.html) है।

<!-- TODO: insert images -->

एक अवलोकन यह है कि `GATK_JOINTGENOTYPING` CPU के लिए बहुत भूखा लगता है, जो समझ में आता है क्योंकि यह बहुत सारी जटिल गणनाएं करता है।
तो हम इसे बढ़ाने का प्रयास कर सकते हैं और देख सकते हैं कि क्या यह runtime को कम करता है।

हालांकि, ऐसा लगता है कि हमने memory आवंटन के साथ निशाने से आगे निकल गए हैं; सभी processes केवल उस अंश का उपयोग कर रही हैं जो हम उन्हें दे रहे हैं।
हमें इसे वापस कम करना चाहिए और कुछ संसाधन बचाने चाहिए।

### 1.2. किसी विशिष्ट process के लिए संसाधन आवंटन समायोजित करें

हम `withName` process selector का उपयोग करके किसी दिए गए process के लिए संसाधन आवंटन निर्दिष्ट कर सकते हैं।
जब यह process block में अकेला हो तो syntax इस तरह दिखता है:

```groovy title="Syntax"
process {
    withName: 'GATK_JOINTGENOTYPING' {
        cpus = 4
    }
}
```

आइए इसे `nextflow.config` फ़ाइल में मौजूदा process block में जोड़ें।

```groovy title="nextflow.config" linenums="11"
process {
    // सभी processes के लिए defaults
    cpus = 2
    memory = 2.GB
    // एक विशिष्ट process के लिए आवंटन
    withName: 'GATK_JOINTGENOTYPING' {
        cpus = 4
    }
}
```

इसके निर्दिष्ट होने के साथ, default सेटिंग्स सभी processes पर लागू होंगी **सिवाय** `GATK_JOINTGENOTYPING` process के, जो एक विशेष snowflake है जिसे बहुत अधिक CPU मिलता है।
उम्मीद है कि इसका प्रभाव होना चाहिए।

### 1.3. संशोधित configuration के साथ फिर से चलाएं

आइए संशोधित configuration के साथ workflow को फिर से चलाएं और reporting flag को चालू रखें, लेकिन ध्यान दें कि हम रिपोर्ट को एक अलग नाम दे रहे हैं ताकि हम उन्हें अलग कर सकें।

```bash
nextflow run main.nf -profile my_laptop -with-report report-config-2.html
```

एक बार फिर, आप शायद runtime में कोई महत्वपूर्ण अंतर नहीं देखेंगे, क्योंकि यह इतना छोटा workload है और tools 'वास्तविक' काम करने की तुलना में सहायक कार्यों में अधिक समय बिताते हैं।

हालांकि, दूसरी रिपोर्ट दिखाती है कि अब हमारा संसाधन उपयोग अधिक संतुलित है।

<!-- **TODO: screenshots?** -->

जैसा कि आप देख सकते हैं, यह दृष्टिकोण तब उपयोगी है जब आपकी processes की अलग-अलग संसाधन आवश्यकताएं हों। यह आपको वास्तविक डेटा के आधार पर प्रत्येक process के लिए सेट किए गए संसाधन आवंटन को सही आकार देने में सक्षम बनाता है, अनुमान लगाने पर नहीं।

!!!note "नोट"

    यह सिर्फ एक छोटा सा स्वाद है कि आप संसाधनों के उपयोग को अनुकूलित करने के लिए क्या कर सकते हैं।
    Nextflow में स्वयं कुछ वास्तव में बढ़िया [dynamic retry logic](https://www.nextflow.io/docs/latest/process.html#dynamic-task-resources) अंतर्निहित है जो संसाधन सीमाओं के कारण विफल होने वाली jobs को पुनः प्रयास करता है।
    इसके अतिरिक्त, Seqera Platform आपके संसाधन आवंटन को स्वचालित रूप से अनुकूलित करने के लिए AI-संचालित टूलिंग भी प्रदान करता है।

    हम इस प्रशिक्षण पाठ्यक्रम के आने वाले भाग में इन दोनों दृष्टिकोणों को कवर करेंगे।

उस ने कहा, आप किस computing executor और compute infrastructure का उपयोग कर रहे हैं, इसके आधार पर आप क्या आवंटित कर सकते हैं (या करना चाहिए) इस पर कुछ बाधाएं हो सकती हैं। उदाहरण के लिए, आपके cluster को आपको कुछ सीमाओं के भीतर रहने की आवश्यकता हो सकती है जो तब लागू नहीं होती जब आप कहीं और चला रहे हों।
