# рднрд╛рдЧ 3: рдПрдХ nf-core рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ

<span class="ai-translation-notice">:material-information-outline:{ .ai-translation-notice-icon } AI-рд╕рд╣рд╛рдпрддрд╛ рдкреНрд░рд╛рдкреНрдд рдЕрдиреБрд╡рд╛рдж - [рдЕрдзрд┐рдХ рдЬрд╛рдиреЗрдВ рдФрд░ рд╕реБрдзрд╛рд░ рд╕реБрдЭрд╛рдПрдВ](https://github.com/nextflow-io/training/blob/master/TRANSLATING.md)</span>

Hello nf-core рдкреНрд░рд╢рд┐рдХреНрд╖рдг рдкрд╛рдареНрдпрдХреНрд░рдо рдХреЗ рдЗрд╕ рддреАрд╕рд░реЗ рднрд╛рдЧ рдореЗрдВ, рд╣рдо рдЖрдкрдХреЛ рджрд┐рдЦрд╛рддреЗ рд╣реИрдВ рдХрд┐ рдЕрдкрдиреА pipeline рдореЗрдВ рдореМрдЬреВрджрд╛ nf-core рдореЙрдбреНрдпреВрд▓ рдХреЛ рдХреИрд╕реЗ рдЦреЛрдЬреЗрдВ, рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ, рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред

nf-core рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рдорд╣рд╛рди рд▓рд╛рднреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ [nf-core/modules](https://github.com/nf-core/modules) рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╕реЗ рдкреВрд░реНрд╡-рдирд┐рд░реНрдорд┐рдд, рдкрд░реАрдХреНрд╖рд┐рдд рдореЙрдбреНрдпреВрд▓ рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реИред
рд╣рд░ process рдХреЛ рд╢реБрд░реВ рд╕реЗ рд▓рд┐рдЦрдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдЖрдк community рджреНрд╡рд╛рд░рд╛ maintain рдХрд┐рдП рдЧрдП рдореЙрдбреНрдпреВрд▓ рдЗрдВрд╕реНрдЯреЙрд▓ рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╕рд░реНрд╡реЛрддреНрддрдо рдкреНрд░рдерд╛рдУрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░рддреЗ рд╣реИрдВред

рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдпрд╣ рджрд┐рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо `core-hello` pipeline рдореЗрдВ nf-core/modules рд╕реЗ `cat/cat` рдореЙрдбреНрдпреВрд▓ рдХреЗ рд╕рд╛рде рдХрд╕реНрдЯрдо `collectGreetings` рдореЙрдбреНрдпреВрд▓ рдХреЛ рдмрджрд▓реЗрдВрдЧреЗред

??? info "рдЗрд╕ рд╕реЗрдХреНрд╢рди рд╕реЗ рдХреИрд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ"

    рдкрд╛рдареНрдпрдХреНрд░рдо рдХрд╛ рдпрд╣ рд╕реЗрдХреНрд╢рди рдорд╛рдирддрд╛ рд╣реИ рдХрд┐ рдЖрдкрдиреЗ [рднрд╛рдЧ 2: nf-core рдХреЗ рд▓рд┐рдП Hello рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦреЗрдВ](./02_rewrite_hello.md) рдкреВрд░рд╛ рдХрд░ рд▓рд┐рдпрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рдХрд╛рд░реНрдпрд╢реАрд▓ `core-hello` pipeline рд╣реИред

    рдпрджрд┐ рдЖрдкрдиреЗ рднрд╛рдЧ 2 рдкреВрд░рд╛ рдирд╣реАрдВ рдХрд┐рдпрд╛ рд╣реИ рдпрд╛ рдЗрд╕ рднрд╛рдЧ рдХреЗ рд▓рд┐рдП рдирдП рд╕рд┐рд░реЗ рд╕реЗ рд╢реБрд░реВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЕрдкрдиреЗ рд╢реБрд░реБрдЖрддреА рдмрд┐рдВрджреБ рдХреЗ рд░реВрдк рдореЗрдВ `core-hello-part2` рд╕рдорд╛рдзрд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
    `hello-nf-core/` рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдХреЗ рдЕрдВрджрд░ рд╕реЗ рдпрд╣ рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:

    ```bash
    cp -r solutions/core-hello-part2 core-hello
    cd core-hello
    ```

    рдпрд╣ рдЖрдкрдХреЛ рдореЙрдбреНрдпреВрд▓ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдПрдХ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХрд╛рд░реНрдпрд╛рддреНрдордХ nf-core pipeline рджреЗрддрд╛ рд╣реИред
    рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдХрд░ рдкрд░реАрдХреНрд╖рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЪрд▓рддрд╛ рд╣реИ:

    ```bash
    nextflow run . --outdir core-hello-results -profile test,docker --validate_params false
    ```

---

## 1. рдПрдХ рдЙрдкрдпреБрдХреНрдд nf-core рдореЙрдбреНрдпреВрд▓ рдЦреЛрдЬреЗрдВ рдФрд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ

рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдЗрдП рд╕реАрдЦреЗрдВ рдХрд┐ рдореМрдЬреВрджрд╛ nf-core рдореЙрдбреНрдпреВрд▓ рдХреИрд╕реЗ рдЦреЛрдЬреЗрдВ рдФрд░ рдЗрд╕реЗ рдЕрдкрдиреА pipeline рдореЗрдВ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВред

рд╣рдо `collectGreetings` process рдХреЛ рдмрджрд▓рдиреЗ рдХрд╛ рд▓рдХреНрд╖реНрдп рд░рдЦреЗрдВрдЧреЗ, рдЬреЛ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдХрдИ greeting рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП Unix `cat` рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред
рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЬреЛрдбрд╝рдирд╛ рдПрдХ рдмрд╣реБрдд рд╣реА рд╕рд╛рдорд╛рдиреНрдп рдСрдкрд░реЗрд╢рди рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрд╣ рддрд░реНрдХрд╕рдВрдЧрдд рд╣реИ рдХрд┐ nf-core рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЙрд╕ рдЙрджреНрджреЗрд╢реНрдп рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдПрдХ рдореЙрдбреНрдпреВрд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

рдЖрдЗрдП рд╢реБрд░реВ рдХрд░реЗрдВред

### 1.1. nf-core рд╡реЗрдмрд╕рд╛рдЗрдЯ рдкрд░ рдЙрдкрд▓рдмреНрдз рдореЙрдбреНрдпреВрд▓ рдмреНрд░рд╛рдЙрдЬрд╝ рдХрд░реЗрдВ

nf-core рдкреНрд░реЛрдЬреЗрдХреНрдЯ [https://nf-co.re/modules](https://nf-co.re/modules) рдкрд░ рдореЙрдбреНрдпреВрд▓ рдХреА рдПрдХ рдХреЗрдВрджреНрд░реАрдХреГрдд рд╕реВрдЪреА maintain рдХрд░рддрд╛ рд╣реИред

рдЕрдкрдиреЗ web browser рдореЗрдВ рдореЙрдбреНрдпреВрд▓ рдкреЗрдЬ рдкрд░ рдЬрд╛рдПрдВ рдФрд░ 'concatenate' рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП search bar рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред

![module search results](./img/module-search-results.png)

рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдХрд╛рдлреА рдХреБрдЫ рдкрд░рд┐рдгрд╛рдо рд╣реИрдВ, рдЙрдирдореЗрдВ рд╕реЗ рдХрдИ рдмрд╣реБрдд рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рдХрд╛рд░ рдХреА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдП рдЧрдП рдореЙрдбреНрдпреВрд▓ рд╣реИрдВред
рдЙрдирдореЗрдВ рд╕реЗ, рдЖрдкрдХреЛ `cat_cat` рдирд╛рдордХ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп-рдЙрджреНрджреЗрд╢реНрдп рдореЙрдбреНрдпреВрд▓ рджрд┐рдЦрд╛рдИ рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдПред

!!! note "рдореЙрдбреНрдпреВрд▓ рдирд╛рдордХрд░рдг рдкрд░рдВрдкрд░рд╛"

    underscore (`_`) рдХрд╛ рдЙрдкрдпреЛрдЧ рдореЙрдбреНрдпреВрд▓ рдирд╛рдореЛрдВ рдореЗрдВ slash (`/`) рд╡рд░реНрдг рдХреЗ рд╕реНрдерд╛рди рдкрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

    nf-core рдореЙрдбреНрдпреВрд▓ `software/command` рдирд╛рдордХрд░рдг рдкрд░рдВрдкрд░рд╛ рдХрд╛ рдкрд╛рд▓рди рдХрд░рддреЗ рд╣реИрдВ рдЬрдм рдХреЛрдИ tool рдХрдИ рдХрдорд╛рдВрдб рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕реЗ `samtools/view` (samtools рдкреИрдХреЗрдЬ, view рдХрдорд╛рдВрдб) рдпрд╛ `gatk/haplotypecaller` (GATK рдкреИрдХреЗрдЬ, HaplotypeCaller рдХрдорд╛рдВрдб)ред
    рдЙрди tools рдХреЗ рд▓рд┐рдП рдЬреЛ рдХреЗрд╡рд▓ рдПрдХ рдореБрдЦреНрдп рдХрдорд╛рдВрдб рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рдореЙрдбреНрдпреВрд▓ `fastqc` рдпрд╛ `multiqc` рдЬреИрд╕реЗ рдПрдХрд▓ рд╕реНрддрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред

рдореЙрдбреНрдпреВрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП `cat_cat` рдореЙрдбреНрдпреВрд▓ рдмреЙрдХреНрд╕ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред

рдореЙрдбреНрдпреВрд▓ рдкреЗрдЬ рджрд┐рдЦрд╛рддрд╛ рд╣реИ:

- рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╡рд┐рд╡рд░рдг: "A module for concatenation of gzipped or uncompressed files"
- рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдХрдорд╛рдВрдб: `nf-core modules install cat/cat`
- Input рдФрд░ output channel рд╕рдВрд░рдЪрдирд╛
- рдЙрдкрд▓рдмреНрдз рдкреИрд░рд╛рдореАрдЯрд░

### 1.2. рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рд╕реЗ рдЙрдкрд▓рдмреНрдз рдореЙрдбреНрдпреВрд▓ рдХреА рд╕реВрдЪреА рдмрдирд╛рдПрдВ

рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ, рдЖрдк nf-core tools рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реАрдзреЗ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рд╕реЗ рднреА рдореЙрдбреНрдпреВрд▓ рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВред

```bash
nf-core modules list remote
```

рдпрд╣ nf-core/modules рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рд╕рднреА рдЙрдкрд▓рдмреНрдз рдореЙрдбреНрдпреВрд▓ рдХреА рдПрдХ рд╕реВрдЪреА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдЧрд╛, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рдереЛрдбрд╝рд╛ рдХрдо рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ рдпрджрд┐ рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рдЙрд╕ рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдирд╛рдо рдирд╣реАрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ рдЖрдк рдЦреЛрдЬ рд░рд╣реЗ рд╣реИрдВред
рд╣рд╛рд▓рд╛рдБрдХрд┐, рдпрджрд┐ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рд╡рд┐рд╢рд┐рд╖реНрдЯ рдореЙрдбреНрдпреВрд▓ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рд╕реВрдЪреА рдХреЛ `grep` рдореЗрдВ pipe рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

```bash
nf-core modules list remote | grep 'cat/cat'
```

??? success "рдХрдорд╛рдВрдб рдЖрдЙрдЯрдкреБрдЯ"

    ```console
    тФВ cat/cat
    ```

рдмрд╕ рдзреНрдпрд╛рди рд░рдЦреЗрдВ рдХрд┐ `grep` рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗрд╡рд▓ рдЙрди рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рдирд┐рдХрд╛рд▓реЗрдЧрд╛ рдЬрд┐рдирдХреЗ рдирд╛рдо рдореЗрдВ рдЦреЛрдЬ рд╢рдмреНрдж рд╣реИ, рдЬреЛ `cat_cat` рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред

### 1.3. рдореЙрдбреНрдпреВрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╡рд┐рд╕реНрддреГрдд рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ

рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рд╕реЗ рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдореЙрдбреНрдпреВрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╡рд┐рд╕реНрддреГрдд рдЬрд╛рдирдХрд╛рд░реА рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП, `info` рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:

```bash
nf-core modules info cat/cat
```

рдпрд╣ рдореЙрдбреНрдпреВрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдЗрд╕рдХреЗ inputs, outputs, рдФрд░ рдмреБрдирд┐рдпрд╛рджреА рдЙрдкрдпреЛрдЧ рдЬрд╛рдирдХрд╛рд░реА рд╢рд╛рдорд┐рд▓ рд╣реИред

??? success "рдХрдорд╛рдВрдб рдЖрдЙрдЯрдкреБрдЯ"

    ```console

                                              ,--./,-.
              ___     __   __   __   ___     /,-._.--~\
        |\ | |__  __ /  ` /  \ |__) |__         }  {
        | \| |       \__, \__/ |  \ |___     \`-._,-`-,
                                              `._,._,'

        nf-core/tools version 3.4.1 - https://nf-co.re


    тХнтФА Module: cat/cat  тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтХо
    тФВ ЁЯМР Repository: https://github.com/nf-core/modules.git              тФВ
    тФВ ЁЯФз Tools: cat                                                      тФВ
    тФВ ЁЯУЦ Description: A module for concatenation of gzipped or           тФВ
    тФВ uncompressed files                                                 тФВ
    тХ░тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтХп
                      тХ╖                                          тХ╖
    ЁЯУе Inputs        тФВDescription                               тФВPattern
    тХ║тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФ┐тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФ┐тФБтФБтФБтФБтФБтФБтФБтХ╕
    input[0]         тФВ                                          тФВ
    тХ╢тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтХ┤
      meta  (map)     тФВGroovy Map containing sample information  тФВ
                      тФВe.g. [ id:'test', single_end:false ]      тФВ
    тХ╢тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтХ┤
      files_in  (file)тФВList of compressed / uncompressed files   тФВ      *
                      тХ╡                                          тХ╡
                          тХ╖                                 тХ╖
    ЁЯУе Outputs           тФВDescription                      тФВ     Pattern
    тХ║тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФ┐тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФ┐тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтХ╕
    file_out             тФВ                                 тФВ
    тХ╢тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтХ┤
      meta  (map)         тФВGroovy Map containing sample     тФВ
                          тФВinformation                      тФВ
    тХ╢тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтХ┤
      ${prefix}  (file)   тФВConcatenated file. Will be       тФВ ${file_out}
                          тФВgzipped if file_out ends with    тФВ
                          тФВ".gz"                            тФВ
    тХ╢тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтХ┤
    versions             тФВ                                 тФВ
    тХ╢тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтХ┤
      versions.yml  (file)тФВFile containing software versionsтФВversions.yml
                          тХ╡                                 тХ╡

    ЁЯТ╗  Installation command: nf-core modules install cat/cat

    ```

рдпрд╣ рд╡рд╣реА рдЬрд╛рдирдХрд╛рд░реА рд╣реИ рдЬреЛ рдЖрдк рд╡реЗрдмрд╕рд╛рдЗрдЯ рдкрд░ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред

### 1.4. cat/cat рдореЙрдбреНрдпреВрд▓ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ

рдЕрдм рдЬрдм рд╣рдореЗрдВ рд╡рд╣ рдореЙрдбреНрдпреВрд▓ рдорд┐рд▓ рдЧрдпрд╛ рд╣реИ рдЬреЛ рд╣рдо рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ рдЗрд╕реЗ рдЕрдкрдиреА pipeline рдХреЗ source code рдореЗрдВ рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ред

рдЕрдЪреНрдЫреА рдЦрдмрд░ рдпрд╣ рд╣реИ рдХрд┐ nf-core рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдХреБрдЫ tooling рд╢рд╛рдорд┐рд▓ рд╣реИ рдЬреЛ рдЗрд╕ рднрд╛рдЧ рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛рддреА рд╣реИред
рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, `nf-core modules install` рдХрдорд╛рдВрдб code рдХреЛ retrieve рдХрд░рдиреЗ рдФрд░ рдЗрд╕реЗ рдПрдХ рд╣реА рдЪрд░рдг рдореЗрдВ рдЖрдкрдХреЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рдХрд░рд╛рдиреЗ рдХреЛ automate рдХрд░рдирд╛ рд╕рдВрднрд╡ рдмрдирд╛рддрд╛ рд╣реИред

рдЕрдкрдиреА pipeline рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ рдЬрд╛рдПрдВ рдФрд░ рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:

```bash
cd core-hello
nf-core modules install cat/cat
```

tool рдкрд╣рд▓реЗ рдЖрдкрдХреЛ repository рдкреНрд░рдХрд╛рд░ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣ рд╕рдХрддрд╛ рд╣реИред
(рдпрджрд┐ рдирд╣реАрдВ, рддреЛ "рдЕрдВрдд рдореЗрдВ, tool рдореЙрдбреНрдпреВрд▓ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝реЗрдЧрд╛ред" рдкрд░ рдиреАрдЪреЗ рдЬрд╛рдПрдВред)

??? success "рдХрдорд╛рдВрдб рдЖрдЙрдЯрдкреБрдЯ"

    ```console

                                          ,--./,-.
          ___     __   __   __   ___     /,-._.--~\
    |\ | |__  __ /  ` /  \ |__) |__         }  {
    | \| |       \__, \__/ |  \ |___     \`-._,-`-,
                                          `._,._,'

    nf-core/tools version 3.4.1 - https://nf-co.re


    WARNING  'repository_type' not defined in .nf-core.yml
    ? Is this repository a pipeline or a modules repository? (Use arrow keys)
    ┬╗ Pipeline
      Modules repository
    ```

рдпрджрд┐ рдРрд╕рд╛ рд╣реИ, рддреЛ default рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ (`Pipeline`) рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП enter рджрдмрд╛рдПрдВ рдФрд░ рдЬрд╛рд░реА рд░рдЦреЗрдВред

tool рддрдм рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЗрд╕ prompt рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ configuration рдореЗрдВ рд╕рдВрд╢реЛрдзрди рдХрд░рдиреЗ рдХреА рдкреЗрд╢рдХрд╢ рдХрд░реЗрдЧрд╛ред

??? success "рдХрдорд╛рдВрдб рдЖрдЙрдЯрдкреБрдЯ"

    ```console
        INFO     To avoid this prompt in the future, add the 'repository_type' key to your .nf-core.yml file.
        ? Would you like me to add this config now? [y/n] (y):
    ```

рдЗрд╕ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ tooling рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдирд╛ рднреА рдЙрдЪрд┐рдд рд╣реИ!
default рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ (рд╣рд╛рдБ) рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП enter рджрдмрд╛рдПрдВред

рдЕрдВрдд рдореЗрдВ, tool рдореЙрдбреНрдпреВрд▓ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝реЗрдЧрд╛ред

??? success "рдХрдорд╛рдВрдб рдЖрдЙрдЯрдкреБрдЯ"

    ```console
    INFO Config added to '.nf-core.yml'
    INFO Reinstalling modules found in 'modules.json' but missing from directory:
    INFO Installing 'cat/cat'
    INFO Use the following statement to include this module:

        include { CAT_CAT } from '../modules/nf-core/cat/cat/main'
    ```

рдХрдорд╛рдВрдб рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ:

- рдореЙрдбреНрдпреВрд▓ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ `modules/nf-core/cat/cat/` рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рддрд╛ рд╣реИ
- рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд┐рдП рдЧрдП рдореЙрдбреНрдпреВрд▓ рдХреЛ рдЯреНрд░реИрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `modules.json` рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддрд╛ рд╣реИ
- рдЖрдкрдХреЛ рдЕрдкрдиреЗ workflow рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╣реА `include` statement рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ

!!! tip

    рдореЙрдбреНрдпреВрд▓ рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдХрдорд╛рдВрдб рдЪрд▓рд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╣рдореЗрд╢рд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреА рд╡рд░реНрддрдорд╛рди working рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдЖрдкрдХреЗ pipeline рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреА root рд╣реИред

рдЖрдЗрдП рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдореЙрдбреНрдпреВрд▓ рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛:

```bash
tree -L 4 modules
```

??? abstract "рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рд╕рд╛рдордЧреНрд░реА"

    ```console
    modules
    тФЬтФАтФА local
    тФВ   тФЬтФАтФА collectGreetings.nf
    тФВ   тФЬтФАтФА convertToUpper.nf
    тФВ   тФЬтФАтФА cowpy.nf
    тФВ   тФФтФАтФА sayHello.nf
    тФФтФАтФА nf-core
        тФФтФАтФА cat
            тФФтФАтФА cat
                тФЬтФАтФА environment.yml
                тФЬтФАтФА main.nf
                тФЬтФАтФА meta.yml
                тФФтФАтФА tests

    5 directories, 7 files
    ```

рдЖрдк рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд┐рдП рдЧрдП рдореЙрдбреНрдпреВрд▓ рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП nf-core utility рд╕реЗ рдкреВрдЫрдХрд░ рднреА рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдХреЛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

```bash
nf-core modules list local
```

??? success "рдХрдорд╛рдВрдб рдЖрдЙрдЯрдкреБрдЯ"

    ```console
    INFO     Repository type: pipeline
    INFO     Modules installed in '.':

    тФПтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФ│тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФ│тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФ│тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФ│тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФУ
    тФГ Module Name тФГ Repository      тФГ Version SHA тФГ Message                                тФГ Date       тФГ
    тФбтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтХЗтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтХЗтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтХЗтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтХЗтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФй
    тФВ cat/cat     тФВ nf-core/modules тФВ 41dfa3f     тФВ update meta.yml of all modules (#8747) тФВ 2025-07-07 тФВ
    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
    ```

рдпрд╣ рдкреБрд╖реНрдЯрд┐ рдХрд░рддрд╛ рд╣реИ рдХрд┐ `cat/cat` рдореЙрдбреНрдпреВрд▓ рдЕрдм рдЖрдкрдХреЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ source code рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИред

рд╣рд╛рд▓рд╛рдБрдХрд┐, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдирдП рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдЗрд╕реЗ рдЕрдкрдиреА pipeline рдореЗрдВ import рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред

### 1.5. рдореЙрдбреНрдпреВрд▓ imports рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ

рдЖрдЗрдП `workflows/hello.nf` workflow рдХреЗ imports рд╕реЗрдХреНрд╢рди рдореЗрдВ `collectGreetings` рдореЙрдбреНрдпреВрд▓ рдХреЗ рд▓рд┐рдП `include` statement рдХреЛ `CAT_CAT` рдХреЗ рд▓рд┐рдП рд╡рд╛рд▓реЗ рд╕реЗ рдмрджрд▓реЗрдВред

рдпрд╛рдж рджрд┐рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдореЙрдбреНрдпреВрд▓ install tool рдиреЗ рд╣рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдЯреАрдХ statement рджрд┐рдпрд╛:

```groovy title="install рдХрдорд╛рдВрдб рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрдорд┐рдд Import statement"
include { CAT_CAT } from '../modules/nf-core/cat/cat/main'`
```

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ nf-core рдкрд░рдВрдкрд░рд╛ рдореЙрдбреНрдпреВрд▓ рдХреЛ import рдХрд░рддреЗ рд╕рдордп рдореЙрдбреНрдпреВрд▓ рдирд╛рдореЛрдВ рдХреЗ рд▓рд┐рдП uppercase рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИред

[core-hello/workflows/hello.nf](core-hello/workflows/hello.nf) рдЦреЛрд▓реЗрдВ рдФрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдХрд░реЗрдВ:

=== "рдмрд╛рдж рдореЗрдВ"

    ```groovy title="core-hello/workflows/hello.nf" linenums="1" hl_lines="10"
    /*
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        IMPORT MODULES / SUBWORKFLOWS / FUNCTIONS
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    */
    include { paramsSummaryMap       } from 'plugin/nf-schema'
    include { softwareVersionsToYAML } from '../subworkflows/nf-core/utils_nfcore_pipeline'
    include { sayHello               } from '../modules/local/sayHello.nf'
    include { convertToUpper         } from '../modules/local/convertToUpper.nf'
    include { CAT_CAT                } from '../modules/nf-core/cat/cat/main'
    include { cowpy                  } from '../modules/local/cowpy.nf'
    ```

=== "рдкрд╣рд▓реЗ"

    ```groovy title="core-hello/workflows/hello.nf" linenums="1" hl_lines="10"
    /*
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        IMPORT MODULES / SUBWORKFLOWS / FUNCTIONS
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    */
    include { paramsSummaryMap       } from 'plugin/nf-schema'
    include { softwareVersionsToYAML } from '../subworkflows/nf-core/utils_nfcore_pipeline'
    include { sayHello               } from '../modules/local/sayHello.nf'
    include { convertToUpper         } from '../modules/local/convertToUpper.nf'
    include { collectGreetings       } from '../modules/local/collectGreetings.nf'
    include { cowpy                  } from '../modules/local/cowpy.nf'
    ```

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ nf-core рдореЙрдбреНрдпреВрд▓ рдХреЗ рд▓рд┐рдП path local рдореЙрдбреНрдпреВрд▓ рд╕реЗ рдХреИрд╕реЗ рднрд┐рдиреНрди рд╣реИ:

- **nf-core рдореЙрдбреНрдпреВрд▓**: `'../modules/nf-core/cat/cat/main'` (`main.nf` рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИ)
- **Local рдореЙрдбреНрдпреВрд▓**: `'../modules/local/collectGreetings.nf'` (рдПрдХрд▓ рдлрд╝рд╛рдЗрд▓ рд╕рдВрджрд░реНрдн)

рдореЙрдбреНрдпреВрд▓ рдЕрдм workflow рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдореЗрдВ рдмрд╕ `collectGreetings` рдХреА call рдХреЛ `CAT_CAT` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП swap рдХрд░рдирд╛ рд╣реИред рд╕рд╣реА?

рдЗрддрдиреА рдЬрд▓реНрджреА рдирд╣реАрдВред

рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░, рдЖрдк рдХреВрджрдиреЗ рдФрд░ code рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЗрд░рд┐рдд рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрд╣ рдзреНрдпрд╛рди рд╕реЗ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд▓ рд▓реЗрдиреЗ рд▓рд╛рдпрдХ рд╣реИ рдХрд┐ рдирдпрд╛ рдореЙрдбреНрдпреВрд▓ рдХреНрдпрд╛ рдЕрдкреЗрдХреНрд╖рд╛ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдпрд╣ рдХреНрдпрд╛ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред

рд╣рдо рдЗрд╕реЗ рдПрдХ рдЕрд▓рдЧ рд╕реЗрдХреНрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рдкрдЯрд╛рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдореЗрдВ рдПрдХ рдирдпрд╛ рддрдВрддреНрд░ рд╢рд╛рдорд┐рд▓ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдордиреЗ рдЕрднреА рддрдХ рдХрд╡рд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рд╣реИ: metadata mapsред

!!! note

    рдЖрдк рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ `collectGreetings.nf` рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВ:

    ```bash
    rm modules/local/collectGreetings.nf
    ```

    рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЖрдк рдЗрд╕реЗ local рдФрд░ nf-core рдореЙрдбреНрдпреВрд▓ рдХреЗ рдмреАрдЪ рдЕрдВрддрд░ рдХреЛ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрджрд░реНрдн рдХреЗ рд░реВрдк рдореЗрдВ рд░рдЦрдирд╛ рдЪрд╛рд╣ рд╕рдХрддреЗ рд╣реИрдВред

### рдирд┐рд╖реНрдХрд░реНрд╖

рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ nf-core рдореЙрдбреНрдпреВрд▓ рдХреИрд╕реЗ рдЦреЛрдЬреЗрдВ рдФрд░ рдЗрд╕реЗ рдЕрдкрдиреЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рдХреИрд╕реЗ рдХрд░рд╛рдПрдВред

### рдЖрдЧреЗ рдХреНрдпрд╛ рд╣реИ?

рдЖрдХрд▓рди рдХрд░реЗрдВ рдХрд┐ рдПрдХ рдирдпрд╛ рдореЙрдбреНрдпреВрд▓ рдХреНрдпрд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдФрд░ рдЗрд╕реЗ pipeline рдореЗрдВ integrate рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рд╕реА рднреА рдорд╣рддреНрд╡рдкреВрд░реНрдг рдкрд░рд┐рд╡рд░реНрддрди рдХреА рдкрд╣рдЪрд╛рди рдХрд░реЗрдВред

---

## 2. рдирдП рдореЙрдбреНрдпреВрд▓ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХрд╛ рдЖрдХрд▓рди рдХрд░реЗрдВ

рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рд╣рдореЗрдВ рдореЙрдбреНрдпреВрд▓ рдХреЗ **interface** рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЕрд░реНрдерд╛рдд рдЗрд╕рдХреА input рдФрд░ output definitions, рдФрд░ рдЗрд╕рдХреА рддреБрд▓рдирд╛ рдЙрд╕ рдореЙрдбреНрдпреВрд▓ рдХреЗ interface рд╕реЗ рдХрд░рдиреА рд╣реЛрдЧреА рдЬрд┐рд╕реЗ рд╣рдо рдмрджрд▓рдирд╛ рдЪрд╛рд╣ рд░рд╣реЗ рд╣реИрдВред
рдпрд╣ рд╣рдореЗрдВ рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рд╣рдо рдирдП рдореЙрдбреНрдпреВрд▓ рдХреЛ рдХреЗрд╡рд▓ рдПрдХ drop-in replacement рдХреЗ рд░реВрдк рдореЗрдВ treat рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдХреНрдпрд╛ рд╣рдореЗрдВ wiring рдХреЗ рдХреБрдЫ рд╣рд┐рд╕реНрд╕реЛрдВ рдХреЛ adapt рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред

рдЖрджрд░реНрд╢ рд░реВрдк рд╕реЗ рдпрд╣ рдХреБрдЫ рдРрд╕рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдореЙрдбреНрдпреВрд▓ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдиреЗ рд╕реЗ _рдкрд╣рд▓реЗ_ рднреА рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдЕрд░реЗ, рджреЗрд░ рд╕реЗ рдмреЗрд╣рддрд░ рдХрднреА рдирд╣реАрдВред
(рдХреНрдпрд╛ рдпрд╣ рдорд╛рдпрдиреЗ рд░рдЦрддрд╛ рд╣реИ, рдЙрди рдореЙрдбреНрдпреВрд▓ рд╕реЗ рдЫреБрдЯрдХрд╛рд░рд╛ рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ `uninstall` рдХрдорд╛рдВрдб рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк рддрдп рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдк рдЕрдм рдирд╣реАрдВ рдЪрд╛рд╣рддреЗ рд╣реИрдВред)

!!! note

    CAT_CAT process рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди compression рдкреНрд░рдХрд╛рд░реЛрдВ, рдлрд╝рд╛рдЗрд▓ extensions рдЗрддреНрдпрд╛рджрд┐ рдХреА рдХреБрдЫ рдЪрддреБрд░ handling рд╢рд╛рдорд┐рд▓ рд╣реИ рдЬреЛ рд╕рдЦреНрддреА рд╕реЗ рд╣рдо рдЖрдкрдХреЛ рдпрд╣рд╛рдВ рджрд┐рдЦрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рдЙрд╕рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдирд╣реАрдВ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЗрд╕рдореЗрдВ рд╕реЗ рдЕрдзрд┐рдХрд╛рдВрд╢ рдХреЛ ignore рдХрд░реЗрдВрдЧреЗ рдФрд░ рдХреЗрд╡рд▓ рдЙрди рд╣рд┐рд╕реНрд╕реЛрдВ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░реЗрдВрдЧреЗ рдЬреЛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИрдВред

### 2.1. рджреЛрдиреЛрдВ рдореЙрдбреНрдпреВрд▓ рдХреЗ interfaces рдХреА рддреБрд▓рдирд╛ рдХрд░реЗрдВ

рдпрд╛рдж рджрд┐рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╣ рд╣реИ рдХрд┐ рд╣рдорд╛рд░реЗ `collectGreetings` рдореЙрдбреНрдпреВрд▓ рдХрд╛ interface рдХреИрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИ:

```groovy title="modules/local/collectGreetings.nf (рдЕрдВрд╢)" linenums="1" hl_lines="6-7 10"
process collectGreetings {

    publishDir 'results', mode: 'copy'

    input:
        path input_files
        val batch_name

    output:
        path "COLLECTED-${batch_name}-output.txt" , emit: outfile
```

`collectGreetings` рдореЙрдбреНрдпреВрд▓ рджреЛ inputs рд▓реЗрддрд╛ рд╣реИ:

- `input_files` рдореЗрдВ process рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ input рдлрд╝рд╛рдЗрд▓реЗрдВ рд╣реЛрддреА рд╣реИрдВ;
- `batch_name` рдПрдХ value рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╣рдо output рдлрд╝рд╛рдЗрд▓ рдХреЛ рдПрдХ run-specific рдирд╛рдо рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ metadata рдХрд╛ рдПрдХ рд░реВрдк рд╣реИред

рдкреВрд░реНрдг рд╣реЛрдиреЗ рдкрд░, `collectGreetings` рдПрдХрд▓ file path рдЖрдЙрдЯрдкреБрдЯ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ `outfile` tag рдХреЗ рд╕рд╛рде emit рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

рддреБрд▓рдирд╛ рдореЗрдВ, `cat/cat` рдореЙрдбреНрдпреВрд▓ рдХрд╛ interface рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИ:

```groovy title="modules/nf-core/cat/cat/main.nf (рдЕрдВрд╢)" linenums="1" hl_lines="11 14"
process CAT_CAT {
    tag "$meta.id"
    label 'process_low'

    conda "${moduleDir}/environment.yml"
    container "${ workflow.containerEngine == 'singularity' && !task.ext.singularity_pull_docker_container ?
        'https://depot.galaxyproject.org/singularity/pigz:2.3.4' :
        'biocontainers/pigz:2.3.4' }"

    input:
    tuple val(meta), path(files_in)

    output:
    tuple val(meta), path("${prefix}"), emit: file_out
    path "versions.yml"               , emit: versions
```

CAT_CAT рдореЙрдбреНрдпреВрд▓ рдПрдХ рдПрдХрд▓ input рд▓реЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╡рд╣ input рдПрдХ tuple рд╣реИ рдЬрд┐рд╕рдореЗрдВ рджреЛ рдЪреАрдЬреЗрдВ рд╣реИрдВ:

- `meta` рдПрдХ рд╕рдВрд░рдЪрдирд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ metadata рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ metamap рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ;
- `files_in` рдореЗрдВ process рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ input рдлрд╝рд╛рдЗрд▓реЗрдВ рд╣реЛрддреА рд╣реИрдВ, рдЬреЛ `collectGreetings` рдХреЗ `input_files` рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИрдВред

рдкреВрд░реНрдг рд╣реЛрдиреЗ рдкрд░, CAT_CAT рдЕрдкрдиреЗ outputs рджреЛ рднрд╛рдЧреЛрдВ рдореЗрдВ рджреЗрддрд╛ рд╣реИ:

- рдПрдХ рдФрд░ tuple рдЬрд┐рд╕рдореЗрдВ metamap рдФрд░ concatenated output рдлрд╝рд╛рдЗрд▓ рд╣реЛрддреА рд╣реИ, `file_out` tag рдХреЗ рд╕рд╛рде emit рдХреА рдЧрдИ;
- рдПрдХ `versions.yml` рдлрд╝рд╛рдЗрд▓ рдЬреЛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП software version рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА capture рдХрд░рддреА рд╣реИ, `versions` tag рдХреЗ рд╕рд╛рде emit рдХреА рдЧрдИред

рдпрд╣ рднреА рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ default рд░реВрдк рд╕реЗ, output рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо metadata рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИ рдПрдХ identifier рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╣реЛрдЧрд╛ (code рдпрд╣рд╛рдБ рдирд╣реАрдВ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ)ред

рдХреЗрд╡рд▓ code рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП рдпрд╣ рдмрд╣реБрдд рдХреБрдЫ рдЯреНрд░реИрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рдЧ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрд╣рд╛рдВ рдПрдХ diagram рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рд╕рдм рдХреБрдЫ рдПрдХ рд╕рд╛рде рдХреИрд╕реЗ рдлрд┐рдЯ рд╣реЛрддрд╛ рд╣реИ рдпрд╣ visualize рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИред

<figure class="excalidraw">
--8<-- "docs/en/docs/hello_nf-core/img/module_comparison.svg"
</figure>

рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рджреЛрдиреЛрдВ рдореЙрдбреНрдпреВрд▓ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рд╕рдорд╛рди input рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ рд╣реИрдВ (input рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рдкреНрд▓рд╕ рдХреБрдЫ metadata) рд▓реЗрдХрд┐рди рдЙрд╕ рд╕рд╛рдордЧреНрд░реА рдХреЛ рдХреИрд╕реЗ package рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЕрд▓рдЧ рдЕрдкреЗрдХреНрд╖рд╛рдПрдВ рд╣реИрдВред
рдЕрднреА рдХреЗ рд▓рд┐рдП versions рдлрд╝рд╛рдЗрд▓ рдХреЛ ignore рдХрд░рддреЗ рд╣реБрдП, рдЙрдирдХрд╛ рдореБрдЦреНрдп output рднреА рд╕рдорддреБрд▓реНрдп рд╣реИ (рдПрдХ concatenated рдлрд╝рд╛рдЗрд▓), рд╕рд┐рд╡рд╛рдп CAT_CAT output рдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рдВрдпреЛрдЬрди рдореЗрдВ metamap рдХреЛ рднреА emit рдХрд░рддрд╛ рд╣реИред

packaging рдХреЗ рдЕрдВрддрд░ рдХреЛ рд╕рдВрднрд╛рд▓рдирд╛ рдХрд╛рдлреА рдЖрд╕рд╛рди рд╣реЛрдЧрд╛, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдереЛрдбрд╝реА рджреЗрд░ рдореЗрдВ рджреЗрдЦреЗрдВрдЧреЗред
рд╣рд╛рд▓рд╛рдБрдХрд┐, metamap рднрд╛рдЧ рдХреЛ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдЖрдкрдХреЛ рдХреБрдЫ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕рдВрджрд░реНрдн рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рдХрд░рд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред

### 2.2. Metamaps рдХреЛ рд╕рдордЭрдирд╛

рд╣рдордиреЗ рдЕрднреА рдЖрдкрдХреЛ рдмрддрд╛рдпрд╛ рдХрд┐ CAT_CAT рдореЙрдбреНрдпреВрд▓ рдЕрдкрдиреЗ input tuple рдХреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ metadata map рдХреА рдЕрдкреЗрдХреНрд╖рд╛ рдХрд░рддрд╛ рд╣реИред
рдЖрдЗрдП рдХреБрдЫ рдорд┐рдирдЯ рд▓реЗрдВ рдФрд░ рдЧрд╣рд░рд╛рдИ рд╕реЗ рджреЗрдЦреЗрдВ рдХрд┐ рд╡рд╣ рдХреНрдпрд╛ рд╣реИред

**metadata map**, рдЬрд┐рд╕реЗ рдЕрдХреНрд╕рд░ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ **metamap** рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, data рдХреА units рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╡рд╛рд▓рд╛ рдПрдХ Groovy-style map рд╣реИред
Nextflow pipelines рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ, data рдХреА units рдХреБрдЫ рднреА рд╣реЛ рд╕рдХрддреА рд╣реИрдВ рдЬреЛ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ: рд╡реНрдпрдХреНрддрд┐рдЧрдд рдирдореВрдиреЗ, рдирдореВрдиреЛрдВ рдХреЗ batches, рдпрд╛ рд╕рдВрдкреВрд░реНрдг datasetsред

рдкрд░рдВрдкрд░рд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдПрдХ nf-core metamap рдХрд╛ рдирд╛рдо `meta` рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ field `id` рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ outputs рдХрд╛ рдирд╛рдордХрд░рдг рдФрд░ data рдХреА units рдХреЛ рдЯреНрд░реИрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ metadata map рдЗрд╕ рддрд░рд╣ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ:

```groovy title="sample-level metamap рдХрд╛ рдЙрджрд╛рд╣рд░рдг"
[id: 'sample1', single_end: false, strandedness: 'forward']
```

рдпрд╛ рдПрдХ рдорд╛рдорд▓реЗ рдореЗрдВ рдЬрд╣рд╛рдВ metadata batch рд╕реНрддрд░ рдкрд░ attached рд╣реИ:

```groovy title="batch-level metamap рдХрд╛ рдЙрджрд╛рд╣рд░рдг"
[id: 'batch1', date: '25.10.01']
```

рдЕрдм рдЖрдЗрдП рдЗрд╕реЗ `CAT_CAT` process рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рд░рдЦреЗрдВ, рдЬреЛ input рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ metamap рдХреЗ рд╕рд╛рде tuple рдореЗрдВ package рдХрд┐рдП рдЬрд╛рдиреЗ рдХреА рдЕрдкреЗрдХреНрд╖рд╛ рдХрд░рддрд╛ рд╣реИ, рдФрд░ output tuple рдХреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд░реВрдк рдореЗрдВ metamap рдХреЛ рднреА рдЖрдЙрдЯрдкреБрдЯ рдХрд░рддрд╛ рд╣реИред

```groovy title="modules/nf-core/cat/cat/main.nf (рдЕрдВрд╢)" linenums="1" hl_lines="2 5"
input:
tuple val(meta), path(files_in)

output:
tuple val(meta), path("${prefix}"), emit: file_out
```

рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, data рдХреА рдкреНрд░рддреНрдпреЗрдХ unit рд╕рдВрдмрдВрдзрд┐рдд metadata рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝реА рд╣реБрдИ pipeline рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдпрд╛рддреНрд░рд╛ рдХрд░рддреА рд╣реИред
рдмрд╛рдж рдХреА processes рддрдм рдЙрд╕ metadata рдХреЛ рднреА рдЖрд╕рд╛рдиреА рд╕реЗ access рдХрд░ рд╕рдХрддреА рд╣реИрдВред

рдпрд╛рдж рд╣реИ рдХрд┐ рдХреИрд╕реЗ рд╣рдордиреЗ рдЖрдкрдХреЛ рдмрддрд╛рдпрд╛ рдХрд┐ `CAT_CAT` рджреНрд╡рд╛рд░рд╛ рдЖрдЙрдЯрдкреБрдЯ рдХреА рдЧрдИ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо metadata рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИ рдПрдХ identifier рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╣реЛрдЧрд╛?
рдпрд╣ рд╕рдВрдмрдВрдзрд┐рдд code рд╣реИ:

```groovy title="modules/nf-core/cat/cat/main.nf (рдЕрдВрд╢)" linenums="35"
prefix   = task.ext.prefix ?: "${meta.id}${getFileSuffix(file_list[0])}"
```

рдпрд╣ рдореЛрдЯреЗ рддреМрд░ рдкрд░ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдЕрдиреБрд╡рд╛рджрд┐рдд рд╣реЛрддрд╛ рд╣реИ: рдпрджрд┐ external task рдкреИрд░рд╛рдореАрдЯрд░ рдкреНрд░рдгрд╛рд▓реА (`task.ext`) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ `prefix` рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ output рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ; рдЕрдиреНрдпрдерд╛ `${meta.id}` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдмрдирд╛рдПрдВ, рдЬреЛ metamap рдореЗрдВ `id` field рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИред

рдЖрдк рдЗрд╕ рддрд░рд╣ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╕рд╛рде рдЗрд╕ рдореЙрдбреНрдпреВрд▓ рдореЗрдВ рдЖрдиреЗ рд╡рд╛рд▓реА input channel рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

```groovy title="рдЙрджрд╛рд╣рд░рдг input channel рд╕рд╛рдордЧреНрд░реА"
ch_input = [[[id: 'batch1', date: '25.10.01'], ['file1A.txt', 'file1B.txt']],
            [[id: 'batch2', date: '25.10.26'], ['file2A.txt', 'file2B.txt']],
            [[id: 'batch3', date: '25.11.14'], ['file3A.txt', 'file3B.txt']]]
```

рдлрд┐рд░ output channel рд╕рд╛рдордЧреНрд░реА рдЗрд╕ рддрд░рд╣ рдмрд╛рд╣рд░ рдЖрддреА рд╣реИ:

```groovy title="рдЙрджрд╛рд╣рд░рдг output channel рд╕рд╛рдордЧреНрд░реА"
ch_input = [[[id: 'batch1', date: '25.10.01'], 'batch1.txt'],
            [[id: 'batch2', date: '25.10.26'], 'batch2.txt'],
            [[id: 'batch3', date: '25.11.14'], 'batch3.txt']]
```

рдЬреИрд╕рд╛ рдХрд┐ рдкрд╣рд▓реЗ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, `tuple val(meta), path(files_in)` input setup рд╕рднреА nf-core рдореЙрдбреНрдпреВрд▓ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдПрдХ рдорд╛рдирдХ pattern рд╣реИред

рдЙрдореНрдореАрдж рд╣реИ рдХрд┐ рдЖрдк рдпрд╣ рджреЗрдЦрдирд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдХрд┐рддрдирд╛ рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИред
рди рдХреЗрд╡рд▓ рдпрд╣ рдЖрдкрдХреЛ metadata рдХреЗ рдЖрдзрд╛рд░ рдкрд░ outputs рдХрд╛ рдирд╛рдо рд░рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдмрд▓реНрдХрд┐ рдЖрдк рд╡рд┐рднрд┐рдиреНрди рдкреИрд░рд╛рдореАрдЯрд░ values рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдЬреИрд╕реА рдЪреАрдЬреЗрдВ рднреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ specific operators рдХреЗ рд╕рдВрдпреЛрдЬрди рдореЗрдВ, рдЖрдк data рдХреЛ group, sort рдпрд╛ filter рднреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ pipeline рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ flows рдХрд░рддрд╛ рд╣реИред

!!! note "Metadata рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдиреЗрдВ"

    Nextflow workflows рдореЗрдВ metadata рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡реНрдпрд╛рдкрдХ рдкрд░рд┐рдЪрдп рдХреЗ рд▓рд┐рдП, рдЬрд┐рд╕рдореЗрдВ samplesheets рд╕реЗ metadata рдХреЛ рдХреИрд╕реЗ рдкрдврд╝реЗрдВ рдФрд░ processing рдХреЛ customize рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░реЗрдВ, [workflows рдореЗрдВ Metadata](../side_quests/metadata) side quest рджреЗрдЦреЗрдВред

### 2.3. рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХрд╛ рд╕рд╛рд░рд╛рдВрд╢ рджреЗрдВ

рдЬреЛ рд╣рдордиреЗ рд╕рдореАрдХреНрд╖рд╛ рдХреА рд╣реИ рдЙрд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдпреЗ рд╡реЗ рдкреНрд░рдореБрдЦ рдкрд░рд┐рд╡рд░реНрддрди рд╣реИрдВ рдЬреЛ рд╣рдореЗрдВ `cat/cat` рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреА pipeline рдореЗрдВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ:

- Batch name рд╡рд╛рд▓рд╛ рдПрдХ metamap рдмрдирд╛рдПрдВ;
- Concatenate рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП input рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд╕реЗрдЯ (convertToUpper рд╕реЗ рдЖ рд░рд╣реА) рдХреЗ рд╕рд╛рде metamap рдХреЛ рдПрдХ tuple рдореЗрдВ package рдХрд░реЗрдВ;
- `collectGreetings()` рд╕реЗ `CAT_CAT` рдореЗрдВ call switch рдХрд░реЗрдВ;
- `CAT_CAT` process рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрдорд┐рдд tuple рд╕реЗ output рдлрд╝рд╛рдЗрд▓ рдХреЛ `cowpy` рдореЗрдВ рдкрд╛рд╕ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ extract рдХрд░реЗрдВред

рдмрд╕ рдЗрддрдирд╛ рд╣реА рдХрд╛рдлреА рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП! рдЕрдм рдЬрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдпреЛрдЬрдирд╛ рд╣реИ, рддреЛ рд╣рдо рдЧреЛрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВред

### рдирд┐рд╖реНрдХрд░реНрд╖

рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдПрдХ рдирдП рдореЙрдбреНрдпреВрд▓ рдХреЗ input рдФрд░ output interface рдХрд╛ рдЖрдХрд▓рди рдХреИрд╕реЗ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреА рдкрд╣рдЪрд╛рди рдХреА рдЬрд╛ рд╕рдХреЗ, рдФрд░ рдЖрдкрдиреЗ рд╕реАрдЦрд╛ рд╣реИ рдХрд┐ nf-core pipelines рджреНрд╡рд╛рд░рд╛ metamaps рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ metadata рдХреЛ data рдХреЗ рд╕рд╛рде рдирд┐рдХрдЯрддрд╛ рд╕реЗ рдЬреБрдбрд╝рд╛ рд░рдЦрд╛ рдЬрд╛ рд╕рдХреЗ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдПрдХ pipeline рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ flows рдХрд░рддрд╛ рд╣реИред

### рдЖрдЧреЗ рдХреНрдпрд╛ рд╣реИ?

рдирдП рдореЙрдбреНрдпреВрд▓ рдХреЛ workflow рдореЗрдВ integrate рдХрд░реЗрдВред

---

## 3. `hello.nf` workflow рдореЗрдВ CAT_CAT рдХреЛ integrate рдХрд░реЗрдВ

рдЕрдм рдЬрдм рдЖрдк metamaps рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рдм рдХреБрдЫ рдЬрд╛рдирддреЗ рд╣реИрдВ (рдпрд╛ рдЗрд╕ рдкрд╛рдареНрдпрдХреНрд░рдо рдХреЗ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд, рд╡реИрд╕реЗ рднреА), рддреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЙрди рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рдЖ рдЧрдпрд╛ рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рд╣рдордиреЗ рдКрдкрд░ рд░реЗрдЦрд╛рдВрдХрд┐рдд рдХрд┐рдпрд╛ рд╣реИред

рд╕реНрдкрд╖реНрдЯрддрд╛ рдХреЗ рд▓рд┐рдП, рд╣рдо рдЗрд╕реЗ рддреЛрдбрд╝реЗрдВрдЧреЗ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдЪрд░рдг рдХреЛ рдЕрд▓рдЧ рд╕реЗ рдХрд╡рд░ рдХрд░реЗрдВрдЧреЗред

!!! note

    рдиреАрдЪреЗ рджрд┐рдЦрд╛рдП рдЧрдП рд╕рднреА рдкрд░рд┐рд╡рд░реНрддрди `core-hello/workflows/hello.nf` workflow рдлрд╝рд╛рдЗрд▓ рдореЗрдВ `main` рдмреНрд▓реЙрдХ рдореЗрдВ workflow logic рдореЗрдВ рдХрд┐рдП рдЧрдП рд╣реИрдВред

### 3.1. рдПрдХ metadata map рдмрдирд╛рдПрдВ

рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдореЗрдВ `CAT_CAT` рдХреЗ рд▓рд┐рдП рдПрдХ metadata map рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдпрд╣ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП рдХрд┐ nf-core рдореЙрдбреНрдпреВрд▓ рдХреЛ metamap рдореЗрдВ рдХрдо рд╕реЗ рдХрдо рдПрдХ `id` field рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред

рдЪреВрдВрдХрд┐ рд╣рдореЗрдВ рдХрд┐рд╕реА рдЕрдиреНрдп metadata рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рд╣рдо рдЗрд╕реЗ рд╕рд░рд▓ рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕ рддрд░рд╣ рдХреБрдЫ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

```groovy title="Syntax рдЙрджрд╛рд╣рд░рдг"
def cat_meta = [id: 'test']
```

рд╕рд┐рд╡рд╛рдп рд╣рдо `id` value рдХреЛ hardcode рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ; рд╣рдо `params.batch` рдкреИрд░рд╛рдореАрдЯрд░ рдХреА value рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред
рддреЛ code рдмрди рдЬрд╛рддрд╛ рд╣реИ:

```groovy title="Syntax рдЙрджрд╛рд╣рд░рдг"
def cat_meta = [id: params.batch]
```

рд╣рд╛рдБ, рдПрдХ рдмреБрдирд┐рдпрд╛рджреА metamap рдмрдирд╛рдирд╛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрддрдирд╛ рд╕рд░рд▓ рд╣реИред

рдЖрдЗрдП рдЗрди рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЛ `convertToUpper` call рдХреЗ рдмрд╛рдж рдЬреЛрдбрд╝реЗрдВ, `collectGreetings` call рдХреЛ рд╣рдЯрд╛рддреЗ рд╣реБрдП:

=== "рдмрд╛рдж рдореЗрдВ"

    ```groovy title="core-hello/workflows/hello.nf" linenums="26" hl_lines="7-8"
        // рдПрдХ рдЕрднрд┐рд╡рд╛рджрди emit рдХрд░реЗрдВ
        sayHello(ch_samplesheet)

        // рдЕрднрд┐рд╡рд╛рджрди рдХреЛ uppercase рдореЗрдВ рдмрджрд▓реЗрдВ
        convertToUpper(sayHello.out)

        // batch name рдХреЗ рд╕рд╛рде ID рдХреЗ рд░реВрдк рдореЗрдВ metadata map рдмрдирд╛рдПрдВ
        def cat_meta = [ id: params.batch ]

        // cowpy рдХреЗ рд╕рд╛рде рдЕрднрд┐рд╡рд╛рджрдиреЛрдВ рдХрд╛ ASCII art рдЬрдирд░реЗрдЯ рдХрд░реЗрдВ
        cowpy(collectGreetings.out.outfile, params.character)
    ```

=== "рдкрд╣рд▓реЗ"

    ```groovy title="core-hello/workflows/hello.nf" linenums="26" hl_lines="7-8"
        // рдПрдХ рдЕрднрд┐рд╡рд╛рджрди emit рдХрд░реЗрдВ
        sayHello(ch_samplesheet)

        // рдЕрднрд┐рд╡рд╛рджрди рдХреЛ uppercase рдореЗрдВ рдмрджрд▓реЗрдВ
        convertToUpper(sayHello.out)

        // рд╕рднреА рдЕрднрд┐рд╡рд╛рджрдиреЛрдВ рдХреЛ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ collect рдХрд░реЗрдВ
        collectGreetings(convertToUpper.out.collect(), params.batch)

        // cowpy рдХреЗ рд╕рд╛рде рдЕрднрд┐рд╡рд╛рджрдиреЛрдВ рдХрд╛ ASCII art рдЬрдирд░реЗрдЯ рдХрд░реЗрдВ
        cowpy(collectGreetings.out.outfile, params.character)
    ```

рдпрд╣ рдПрдХ рд╕рд░рд▓ metadata map рдмрдирд╛рддрд╛ рд╣реИ рдЬрд╣рд╛рдВ `id` рд╣рдорд╛рд░реЗ batch рдирд╛рдо рдкрд░ рд╕реЗрдЯ рд╣реИ (рдЬреЛ test profile рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп `test` рд╣реЛрдЧрд╛)ред

### 3.2. Metadata tuples рдХреЗ рд╕рд╛рде рдПрдХ channel рдмрдирд╛рдПрдВ

рдЕрдЧрд▓рд╛, рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА channel рдХреЛ metadata рдФрд░ рдлрд╝рд╛рдЗрд▓реЗрдВ рдпреБрдХреНрдд tuples рдХреА channel рдореЗрдВ transform рдХрд░реЗрдВ:

=== "рдмрд╛рдж рдореЗрдВ"

    ```groovy title="core-hello/workflows/hello.nf" linenums="26" hl_lines="10-11"
        // рдПрдХ рдЕрднрд┐рд╡рд╛рджрди emit рдХрд░реЗрдВ
        sayHello(ch_samplesheet)

        // рдЕрднрд┐рд╡рд╛рджрди рдХреЛ uppercase рдореЗрдВ рдмрджрд▓реЗрдВ
        convertToUpper(sayHello.out)

        // batch name рдХреЗ рд╕рд╛рде ID рдХреЗ рд░реВрдк рдореЗрдВ metadata map рдмрдирд╛рдПрдВ
        def cat_meta = [ id: params.batch ]

        // tuple format рдореЗрдВ metadata рдФрд░ files рдХреЗ рд╕рд╛рде рдПрдХ channel рдмрдирд╛рдПрдВ
        ch_for_cat = convertToUpper.out.collect().map { files -> tuple(cat_meta, files) }

        // cowpy рдХреЗ рд╕рд╛рде рдЕрднрд┐рд╡рд╛рджрдиреЛрдВ рдХрд╛ ASCII art рдЬрдирд░реЗрдЯ рдХрд░реЗрдВ
        cowpy(collectGreetings.out.outfile, params.character)
    ```

=== "рдкрд╣рд▓реЗ"

    ```groovy title="core-hello/workflows/hello.nf" linenums="26"
        // рдПрдХ рдЕрднрд┐рд╡рд╛рджрди emit рдХрд░реЗрдВ
        sayHello(ch_samplesheet)

        // рдЕрднрд┐рд╡рд╛рджрди рдХреЛ uppercase рдореЗрдВ рдмрджрд▓реЗрдВ
        convertToUpper(sayHello.out)

        // batch name рдХреЗ рд╕рд╛рде ID рдХреЗ рд░реВрдк рдореЗрдВ metadata map рдмрдирд╛рдПрдВ
        def cat_meta = [ id: params.batch ]

        // cowpy рдХреЗ рд╕рд╛рде рдЕрднрд┐рд╡рд╛рджрдиреЛрдВ рдХрд╛ ASCII art рдЬрдирд░реЗрдЯ рдХрд░реЗрдВ
        cowpy(collectGreetings.out.outfile, params.character)
    ```

рд╣рдордиреЗ рдЬреЛ рдкрдВрдХреНрддрд┐ рдЬреЛрдбрд╝реА рд╣реИ рд╡рд╣ рджреЛ рдЪреАрдЬреЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреА рд╣реИ:

- `.collect()` `convertToUpper` output рд╕реЗ рд╕рднреА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдПрдХ рдПрдХрд▓ list рдореЗрдВ gather рдХрд░рддрд╛ рд╣реИ
- `.map { files -> tuple(cat_meta, files) }` `[metadata, files]` рдХреЗ format рдореЗрдВ рдПрдХ tuple рдмрдирд╛рддрд╛ рд╣реИ рдЬреЛ `CAT_CAT` рдЕрдкреЗрдХреНрд╖рд╛ рдХрд░рддрд╛ рд╣реИ

рдпрд╣ рд╕рдм рдХреБрдЫ рд╣реИ рдЬреЛ рд╣рдореЗрдВ `CAT_CAT` рдХреЗ рд▓рд┐рдП input tuple рдХреЛ рд╕реЗрдЯ рдЕрдк рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред

### 3.3. CAT_CAT рдореЙрдбреНрдпреВрд▓ рдХреЛ call рдХрд░реЗрдВ

рдЕрдм рдирдП рдмрдирд╛рдП рдЧрдП channel рдкрд░ `CAT_CAT` рдХреЛ call рдХрд░реЗрдВ:

=== "рдмрд╛рдж рдореЗрдВ"

    ```groovy title="core-hello/workflows/hello.nf" linenums="26" hl_lines="13-14"
        // рдПрдХ рдЕрднрд┐рд╡рд╛рджрди emit рдХрд░реЗрдВ
        sayHello(ch_samplesheet)

        // рдЕрднрд┐рд╡рд╛рджрди рдХреЛ uppercase рдореЗрдВ рдмрджрд▓реЗрдВ
        convertToUpper(sayHello.out)

        // batch name рдХреЗ рд╕рд╛рде ID рдХреЗ рд░реВрдк рдореЗрдВ metadata map рдмрдирд╛рдПрдВ
        def cat_meta = [ id: params.batch ]

        // tuple format рдореЗрдВ metadata рдФрд░ files рдХреЗ рд╕рд╛рде рдПрдХ channel рдмрдирд╛рдПрдВ
        ch_for_cat = convertToUpper.out.collect().map { files -> tuple(cat_meta, files) }

        // nf-core cat/cat рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ concatenate рдХрд░реЗрдВ
        CAT_CAT(ch_for_cat)

        // cowpy рдХреЗ рд╕рд╛рде рдЕрднрд┐рд╡рд╛рджрдиреЛрдВ рдХрд╛ ASCII art рдЬрдирд░реЗрдЯ рдХрд░реЗрдВ
        cowpy(collectGreetings.out.outfile, params.character)
    ```

=== "рдкрд╣рд▓реЗ"

    ```groovy title="core-hello/workflows/hello.nf" linenums="26"
        // рдПрдХ рдЕрднрд┐рд╡рд╛рджрди emit рдХрд░реЗрдВ
        sayHello(ch_samplesheet)

        // рдЕрднрд┐рд╡рд╛рджрди рдХреЛ uppercase рдореЗрдВ рдмрджрд▓реЗрдВ
        convertToUpper(sayHello.out)

        // batch name рдХреЗ рд╕рд╛рде ID рдХреЗ рд░реВрдк рдореЗрдВ metadata map рдмрдирд╛рдПрдВ
        def cat_meta = [ id: params.batch ]

        // tuple format рдореЗрдВ metadata рдФрд░ files рдХреЗ рд╕рд╛рде рдПрдХ channel рдмрдирд╛рдПрдВ
        ch_for_cat = convertToUpper.out.collect().map { files -> tuple(cat_meta, files) }

        // cowpy рдХреЗ рд╕рд╛рде рдЕрднрд┐рд╡рд╛рджрдиреЛрдВ рдХрд╛ ASCII art рдЬрдирд░реЗрдЯ рдХрд░реЗрдВ
        cowpy(collectGreetings.out.outfile, params.character)
    ```

рдпрд╣ рдЗрд╕ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдХрд╛ рд╕рдмрд╕реЗ рдореБрд╢реНрдХрд┐рд▓ рд╣рд┐рд╕реНрд╕рд╛ рдкреВрд░рд╛ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдо рдЕрднреА рддрдХ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдирд╣реАрдВ рд╣реБрдП рд╣реИрдВ: рд╣рдореЗрдВ рдЕрднреА рднреА рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рд╣рдо concatenated output рдХреЛ `cowpy` process рдореЗрдВ рдХреИрд╕реЗ рдкрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВред

### 3.4. `cowpy` рдХреЗ рд▓рд┐рдП tuple рд╕реЗ output file рдХреЛ extract рдХрд░реЗрдВ

рдкрд╣рд▓реЗ, `collectGreetings` process рдиреЗ рдмрд╕ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдЙрддреНрдкрдиреНрди рдХреА рдЬрд┐рд╕реЗ рд╣рдо рд╕реАрдзреЗ `cowpy` рдореЗрдВ рдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рдереЗред
рд╣рд╛рд▓рд╛рдБрдХрд┐, `CAT_CAT` process рдПрдХ tuple рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ output рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрд▓рд╛рд╡рд╛ metamap рд╢рд╛рдорд┐рд▓ рд╣реИред

рдЪреВрдВрдХрд┐ `cowpy` рдЕрднреА рддрдХ metadata tuples рд╕реНрд╡реАрдХрд╛рд░ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ (рд╣рдо рдЗрд╕реЗ рдкрд╛рдареНрдпрдХреНрд░рдо рдХреЗ рдЕрдЧрд▓реЗ рднрд╛рдЧ рдореЗрдВ рдареАрдХ рдХрд░реЗрдВрдЧреЗ), рд╣рдореЗрдВ `cowpy` рдХреЛ рд╕реМрдВрдкрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ `CAT_CAT` рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрдорд┐рдд tuple рд╕реЗ output рдлрд╝рд╛рдЗрд▓ рдХреЛ extract рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ:

=== "рдмрд╛рдж рдореЗрдВ"

    ```groovy title="core-hello/workflows/hello.nf" linenums="26" hl_lines="16-17 20"
        // рдПрдХ рдЕрднрд┐рд╡рд╛рджрди emit рдХрд░реЗрдВ
        sayHello(ch_samplesheet)

        // рдЕрднрд┐рд╡рд╛рджрди рдХреЛ uppercase рдореЗрдВ рдмрджрд▓реЗрдВ
        convertToUpper(sayHello.out)

        // batch name рдХреЗ рд╕рд╛рде ID рдХреЗ рд░реВрдк рдореЗрдВ metadata map рдмрдирд╛рдПрдВ
        def cat_meta = [ id: params.batch ]

        // tuple format рдореЗрдВ metadata рдФрд░ files рдХреЗ рд╕рд╛рде рдПрдХ channel рдмрдирд╛рдПрдВ
        ch_for_cat = convertToUpper.out.collect().map { files -> tuple(cat_meta, files) }

        // concatenate the greetings
        CAT_CAT(ch_for_cat)

        // tuple рд╕реЗ file рдХреЛ extract рдХрд░реЗрдВ рдХреНрдпреЛрдВрдХрд┐ cowpy рдЕрднреА рддрдХ metadata рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ
        ch_for_cowpy = CAT_CAT.out.file_out.map{ meta, file -> file }

        // cowpy рдХреЗ рд╕рд╛рде рдЕрднрд┐рд╡рд╛рджрдиреЛрдВ рдХрд╛ ASCII art generate рдХрд░реЗрдВ
        cowpy(ch_for_cowpy, params.character)
    ```

=== "рдкрд╣рд▓реЗ"

    ```groovy title="core-hello/workflows/hello.nf" linenums="26" hl_lines="17"
        // рдПрдХ рдЕрднрд┐рд╡рд╛рджрди emit рдХрд░реЗрдВ
        sayHello(ch_samplesheet)

        // рдЕрднрд┐рд╡рд╛рджрди рдХреЛ uppercase рдореЗрдВ рдмрджрд▓реЗрдВ
        convertToUpper(sayHello.out)

        // batch name рдХреЗ рд╕рд╛рде ID рдХреЗ рд░реВрдк рдореЗрдВ metadata map рдмрдирд╛рдПрдВ
        def cat_meta = [ id: params.batch ]

        // tuple format рдореЗрдВ metadata рдФрд░ files рдХреЗ рд╕рд╛рде рдПрдХ channel рдмрдирд╛рдПрдВ
        ch_for_cat = convertToUpper.out.collect().map { files -> tuple(cat_meta, files) }

        // concatenate the greetings
        CAT_CAT(ch_for_cat)

        // cowpy рдХреЗ рд╕рд╛рде рдЕрднрд┐рд╡рд╛рджрдиреЛрдВ рдХрд╛ ASCII art рдЬрдирд░реЗрдЯ рдХрд░реЗрдВ
        cowpy(collectGreetings.out.outfile, params.character)
    ```

`.map{ meta, file -> file }` operation `CAT_CAT` рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрдорд┐рдд `[metadata, file]` tuple рд╕реЗ file рдХреЛ рдПрдХ рдирдП channel, `ch_for_cowpy`, рдореЗрдВ extract рдХрд░рддрд╛ рд╣реИред

рдлрд┐рд░ рдпрд╣ рдмрд╕ рдЙрд╕ рдЕрдВрддрд┐рдо рдкрдВрдХреНрддрд┐ рдореЗрдВ `collectGreetings.out.outfile` рдХреЗ рдмрдЬрд╛рдп `cowpy` рдХреЛ `ch_for_cowpy` рдкрд╛рд╕ рдХрд░рдиреЗ рдХреА рдмрд╛рдд рд╣реИред

!!! note

    рдкрд╛рдареНрдпрдХреНрд░рдо рдХреЗ рдЕрдЧрд▓реЗ рднрд╛рдЧ рдореЗрдВ, рд╣рдо `cowpy` рдХреЛ рд╕реАрдзреЗ metadata tuples рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП рдпрд╣ extraction рдЪрд░рдг рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд░рд╣реЗрдЧрд╛ред

### 3.5. Workflow рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ

рдЖрдЗрдП рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ рдХрд┐ workflow рдирдП integrated `cat/cat` рдореЙрдбреНрдпреВрд▓ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ:

```bash
nextflow run . --outdir core-hello-results -profile test,docker --validate_params false
```

рдпрд╣ рдпрдереЛрдЪрд┐рдд рд░реВрдк рд╕реЗ рдЬрд▓реНрджреА рдЪрд▓рдирд╛ рдЪрд╛рд╣рд┐рдПред

??? success "рдХрдорд╛рдВрдб рдЖрдЙрдЯрдкреБрдЯ"

    ```console
    N E X T F L O W ~ version 25.04.3

        Launching `./main.nf` [evil_pike] DSL2 - revision: b9e9b3b8de

        Input/output options
          input                     : /workspaces/training/hello-nf-core/core-hello/assets/greetings.csv
          outdir                    : core-hello-results

        Institutional config options
          config_profile_name       : Test profile
          config_profile_description: Minimal test dataset to check pipeline function

        Generic options
          validate_params           : false
          trace_report_suffix       : 2025-10-30_18-50-58

        Core Nextflow options
          runName                   : evil_pike
          containerEngine           : docker
          launchDir                 : /workspaces/training/hello-nf-core/core-hello
          workDir                   : /workspaces/training/hello-nf-core/core-hello/work
          projectDir                : /workspaces/training/hello-nf-core/core-hello
          userName                  : root
          profile                   : test,docker
          configFiles               : /workspaces/training/hello-nf-core/core-hello/nextflow.config

        !! Only displaying parameters that differ from the pipeline defaults !!
        ------------------------------------------------------
        executor >  local (8)
        [b3/f005fd] CORE_HELLO:HELLO:sayHello (3)       [100%] 3 of 3 тЬФ
        [08/f923d0] CORE_HELLO:HELLO:convertToUpper (3) [100%] 3 of 3 тЬФ
        [34/3729a9] CORE_HELLO:HELLO:CAT_CAT (test)     [100%] 1 of 1 тЬФ
        [24/df918a] CORE_HELLO:HELLO:cowpy              [100%] 1 of 1 тЬФ
        -[core/hello] Pipeline completed successfully-
    ```

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ `collectGreetings` рдХреЗ рдмрдЬрд╛рдп рдЕрдм process execution list рдореЗрдВ `CAT_CAT` рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИред

рдФрд░ рдмрд╕! рд╣рдо рдЕрдм pipeline рдореЗрдВ рдЙрд╕ рдЪрд░рдг рдХреЗ рд▓рд┐рдП custom prototype-grade code рдХреЗ рдмрдЬрд╛рдп рдПрдХ рдордЬрдмреВрдд community-curated рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВред

### рдирд┐рд╖реНрдХрд░реНрд╖

рдЕрдм рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдХреИрд╕реЗ:

- nf-core рдореЙрдбреНрдпреВрд▓ рдЦреЛрдЬреЗрдВ рдФрд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ
- рдПрдХ nf-core рдореЙрдбреНрдпреВрд▓ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХрд╛ рдЖрдХрд▓рди рдХрд░реЗрдВ
- nf-core рдореЙрдбреНрдпреВрд▓ рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд░рд▓ metadata map рдмрдирд╛рдПрдВ
- рдЕрдкрдиреЗ workflow рдореЗрдВ рдПрдХ nf-core рдореЙрдбреНрдпреВрд▓ рдХреЛ integrate рдХрд░реЗрдВ

### рдЖрдЧреЗ рдХреНрдпрд╛ рд╣реИ?

рдЕрдкрдиреЗ local рдореЙрдбреНрдпреВрд▓ рдХреЛ nf-core рдкрд░рдВрдкрд░рд╛рдУрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП adapt рдХрд░рдирд╛ рд╕реАрдЦреЗрдВред
рд╣рдо рдЖрдкрдХреЛ рдпрд╣ рднреА рджрд┐рдЦрд╛рдПрдВрдЧреЗ рдХрд┐ nf-core tooling рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ template рд╕реЗ рдирдП nf-core рдореЙрдбреНрдпреВрд▓ рдХреИрд╕реЗ рдмрдирд╛рдПрдВред
